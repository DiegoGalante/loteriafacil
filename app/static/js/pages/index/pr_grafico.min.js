_bgcolorGray="bg-gray",_bgcolorInfo11_12="bg-info",_bgcolorWarning13="bg-warning",_bgcolorSuccess14="bg-success",_bgcolorDanger15="bg-danger",_colorGray="#ced4da",_colorInfo11_12="#17a2b8",_colorWarning13="#ffc107",_colorSuccess14="#28a745",_colorDanger15="#dc3545",_objPrincipal={};var _lotoChart=null;$(document).ready(function(){function a(m){return 100*m/15}function b(m=0){$("#gamePerson").text(""),$.ajax({type:"POST",contentType:"application/json",async:!0,url:0===parseInt(m)?"/load":"/load/"+parseInt(m),success:function(o){_objPrincipal=o,parseInt(m)?$("#txtConcurse").val(o.concurse.concurse):$("#txtConcurse").val(""),$("#concurseHeader").text("Concurso "+o.concurse.concurse+" - "+o.concurse.dtConcurse),$("#concurseHeader").attr("title",o.concurse.dtExtense),$("#lot_game").text(o.concurse.game),k(15,o.concurse.hit15,o.concurse.shared15,o.concurse.percent15),k(14,o.concurse.hit14,o.concurse.shared14,o.concurse.percent14),k(13,o.concurse.hit13,o.concurse.shared13,o.concurse.percent13),k(12,o.concurse.hit12,o.concurse.shared12,o.concurse.percent12),k(11,o.concurse.hit11,o.concurse.shared11,o.concurse.percent11),l(o.concurse.game,[]),d()},error:function(o){console.log(o)}})}function c(m=!1){$.ajax({type:"POST",contentType:"application/json",async:!0,url:"/checkOnline/"+m,data:JSON.stringify(_objPrincipal),success:function(o){f(!1),o.return?b():console.log(o.msg)},error:function(o){f(!1),console.log(o)}})}function d(){g(!0),$.ajax({type:"POST",contentType:"application/json",async:!0,url:"/loadGames",data:JSON.stringify(_objPrincipal),success:function(m){g(!1),m.return||console.log(m.msg),m.personGame.length==void 0&&(m.personGame=[]),console.log(m),_objPrincipal.personGame=m.personGame,_objPrincipal.concurse.amount_tickets=m.amount_tickets,$("#amount_ticket").prop("style","font-size: 25px;"),0<_objPrincipal.concurse.amount_tickets?($("#amount_ticket").addClass("text-success"),$("#amount_ticket").text("R$ "+j(_objPrincipal.concurse.amount_tickets)+" "),$("#amount_ticket").append("<i class='fa fa-thumbs-o-up' title='Parab\xE9ns ;)'></i>")):($("#amount_ticket").removeClass("text-success"),$("#amount_ticket").text("R$ "+j(_objPrincipal.concurse.amount_tickets))),h(_objPrincipal.personGame),l(_objPrincipal.concurse.game,_objPrincipal.personGame)},error:function(m){g(!1),console.log(m)}})}function e(){$.ajax({type:"POST",contentType:"application/json",async:!0,url:"/sendEmail",data:JSON.stringify(_objPrincipal),success:function(m){if(f(!1),m.return){var o=$("#divEmail"),p=$("#btn-email");p.addClass("hide"),o.fadeIn(1e3),o.val(m.msg),o.removeClass("hide"),setInterval(function(){o.hide(1250,function(){o.addClass("hide"),o.get(0).style.display=""})},3100)}else console.log(m.msg)},error:function(m){f(!1),console.log(m)}})}function f(m=!1){m?$("#divCarregando").removeClass("hide"):$("#divCarregando").addClass("hide")}function g(m=!1){m?$("#divCarregandoJogos").removeClass("hide"):$("#divCarregandoJogos").addClass("hide")}function h(m){if($("#gamePerson").text(""),$("#pontuationStats").removeClass("hide"),0==m.length)$("#hasGame").addClass("hide"),$("#noGame").removeClass("hide");else{for(_colorGame="",html="",divGroup="<div class='progress-group'>",fechaDiv="</div>",divProgress="<div class='progress progress-sm active'>",i=0;i<m.length;i++){switch(html="",m[i].hits){case 15:_colorGame=_bgcolorDanger15;break;case 14:_colorGame=_bgcolorSuccess14;break;case 13:_colorGame=_bgcolorWarning13;break;case 12:case 11:_colorGame=_bgcolorInfo11_12;break;default:_colorGame=_bgcolorGray;}html+=divGroup,popoverGroup=10<m[i].hits?"<a href='#' title='Autor' data-toggle='popover' data-trigger='hover' data-placement='left' data-content='"+m[i].name+" - R$ "+j(m[i].amount)+"'>Jogo  #"+m[i].id+"</a> - <strong>"+m[i].hits+"</strong> dezenas sorteadas!":"<a title='Autor' data-toggle='popover' data-trigger='hover' data-placement='left' data-content='"+m[i].name+"'>Jogo  #"+m[i].id+"</a> - "+m[i].hits+" dezenas sorteadas!",html+=popoverGroup,spanGroup="<span class='float-right'><b><span class='badge "+_colorGame+"'>"+m[i].hits+"</span></b> / <span class='badge bg-danger'>15</span></span>",html+=spanGroup,html+=divProgress,progressBar="<div class='progress-bar "+_colorGame+" progress-bar-striped' role='progressbar' aria-valuenow='11' aria-valuemin='0' aria-valuemax='15' title='"+a(m[i].hits)+"% de acerto!'  style='width: "+a(m[i].hits)+"%;' id='progressBar"+m[i].id+"'>",html+=progressBar,html+=fechaDiv,html+=fechaDiv,html+=fechaDiv,$("#gamePerson").append(html),$("[data-toggle=\"popover\"]").popover()}$("#noGame").addClass("hide"),$("#divCarregandoJogos").addClass("hide"),$("#hasGame").removeClass("hide")}g()}function j(m){return m.toFixed(2).replace(".",",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")}function k(m,o,p,q){switch(success="text-success",danger="text-danger",warning="text-warning",up="<i class='fa fa-caret-up'></i>",down="<i class='fa fa-caret-down'></i>",same="<i class='fa fa-caret-left'></i>",popoverContent="",txtPercent="",0==q?($("#percent"+m).addClass(warning),popoverContent="Mesmo valor que concurso passado!",txtPercent=same):0>q?($("#percent"+m).addClass(danger),txtPercent=down,popoverContent=Math.abs(q)+"% Menor que o concurso passado!"):($("#percent"+m).addClass(success),txtPercent=up,popoverContent=Math.abs(q)+"% Maior que o concurso passado!"),o){case 0:$("#hit"+m).text("Ningu\xE9m acertou");break;case 1:$("#hit"+m).text(o+" Ganhador");break;default:$("#hit"+m).text(o+" Ganhadores");}try{$("#shared"+m).text("R$ "+j(p)),$("#percent"+m).text(Math.abs(q)+"% "),$("#percent"+m).append(txtPercent),$("#percent"+m)[0].dataset.content=popoverContent}catch(r){}}function l(m,o){$("#divCarregandoGraph").addClass("hide"),$("#chart").removeClass("hide"),"use strict";var p={fontColor:"#495057",fontStyle:"bold"},q="index",r=!1,s=[],t="";for(t=$("#loto-chart"),i=0;i<o.length;i++)if(0<o.length){switch(colorPersonGame="",o[i].hits){case 15:colorPersonGame=_colorDanger15;break;case 14:colorPersonGame=_colorSuccess14;break;case 13:colorPersonGame=_colorWarning13;break;case 12:case 11:colorPersonGame=_colorInfo11_12;break;default:colorPersonGame=_colorGray;}s.push({type:"line",data:o[i].game.split("-"),backgroundColor:colorPersonGame,borderColor:colorPersonGame,pointBorderColor:colorPersonGame,pointBackgroundColor:colorPersonGame,fill:!1,label:"Jogo #"+o[i].id})}s.push({type:"line",data:m.split("-"),backgroundColor:_colorDanger15,borderColor:_colorDanger15,pointBorderColor:_colorDanger15,pointBackgroundColor:_colorDanger15,fill:!1,label:"Lotofacil"}),null!=_lotoChart&&_lotoChart.destroy(),_lotoChart=new Chart(t,{data:{labels:["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15"],datasets:s},options:{maintainAspectRatio:!1,tooltips:{mode:q,intersect:r},hover:{mode:q,intersect:r},legend:{display:!0},scales:{yAxes:[{gridLines:{display:!0,lineWidth:"4px",color:"rgba(0, 0, 0, .2)",zeroLineColor:"transparent"},ticks:$.extend({beginAtZero:!0,suggestedMax:25},p)}],xAxes:[{display:!0,gridLines:{display:!0},ticks:p}]}}})}b(),$("#concurseSearch").click(function(){b($("#txtConcurse").val())}),$("#btn-checkOnline").click(function(){f(!0),c(!0)}),$("#btn-email").click(function(){null!=_objPrincipal&&null!=_objPrincipal.configuration&&0<_objPrincipal.configuration.person&&(f(!0),e())}),$(":input").keyup(function(m){13==m.which&&b($("#txtConcurse").val())}),Number.prototype.toFixedDown=function(m){var o=this-Math.pow(10,-m)/2;return o+=o/Math.pow(2,53),o.toFixed(m)},$("[data-toggle=\"popover\"]").popover()}),jQuery("#loto-chart").attr("tabindex",-1).focus();